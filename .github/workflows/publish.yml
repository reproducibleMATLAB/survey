name: Publish livescript as HTML
on:
  workflow_dispatch:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    name: Publish livescript as HTML
    runs-on: ubuntu-latest
    steps:
    - name: Check out repository
      uses: actions/checkout@v3
    - name: Set up MATLAB
      uses: matlab-actions/setup-matlab@v1
    - name: Run commands
      uses: matlab-actions/run-command@v1
      with:
        command: mkdir("build");export("analysis.mlx", "build/analysis.html")
    - name: Publish to gh pages
      if: ${{ github.event_name == 'push' }}
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        folder: build
